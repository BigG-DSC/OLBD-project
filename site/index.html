<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SafeAir</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/creative.min.css" rel="stylesheet">

    <script src='https://api.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">SafeAir</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#about">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#values">Safety Values</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#data">Data Sources</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#team">Team</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <header class="masthead text-center text-white d-flex">
      <div class="container my-auto">
        <div class="row">
          <div class="col-lg-10 mx-auto">
            <h1 class="text-uppercase">
              <strong>Open Linked Big Data Project</strong>
            </h1>
            <hr>
          </div>
          <div class="col-lg-8 mx-auto">
            <p class="text-faded mb-5">Using Open Linked Big Data to investigate Air Quality for high-risk population groups around Madrid.</p>
            <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">Find Out More</a>
          </div>
        </div>
      </div>
    </header>

    <section class="bg-primary" id="about">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading text-white">Don't Breath too much here!</h2>
            <hr class="light my-4">
            <p class="text-faded mb-4">Ever wondered how poluted the area you are living in is? Well ask this qeustion again for your children... or for you (grand-)parents. Air polution yields a health related problems to these groups of people. Lack of information on this issue results in more health risks.</p><p class="text-faded mb-4"><b>SafeAir</b> solves this problem for you! We give you useful and interactive infographics on air polution throughout the city of Madrid. Combining this with geo-locations of primary schools, children playgrounds or elderly homes will give you all the insights you need to protect your deerest from exposure to high polution!</p>
            <a class="btn btn-light btn-xl js-scroll-trigger" href="#services">Get Started!</a>
          </div>
        </div>
      </div>
    </section>

    <section id="values">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading">Our Core Values</h2>
            <hr class="my-4">
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6 text-center">
            <div class="service-box mt-5 mx-auto">
              <i class="fas fa-4x fa-check-square text-primary mb-3 sr-icon-1"></i>
              <h3 class="mb-3">Safety</h3>
              <p class="text-muted mb-0">Be sure about the polution in your area!</p>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 text-center">
            <div class="service-box mt-5 mx-auto">
              <i class="fas fa-4x fa-link text-primary mb-3 sr-icon-2"></i>
              <h3 class="mb-3">Link Data</h3>
              <p class="text-muted mb-0">Linking different data sources for more power.</p>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 text-center">
            <div class="service-box mt-5 mx-auto">
              <i class="fas fa-4x fa-smile text-primary mb-3 sr-icon-3"></i>
              <h3 class="mb-3">Interactivity</h3>
              <p class="text-muted mb-0">Interact with the product and check your location.</p>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 text-center">
            <div class="service-box mt-5 mx-auto">
              <i class="fas fa-4x fa-history text-primary mb-3 sr-icon-4"></i>
              <h3 class="mb-3">Historic</h3>
              <p class="text-muted mb-0">Data usage over time to make accurate predictions.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="p-0" id="data">
      <div class="container-fluid p-0">
        <div class="row no-gutters">
          <div class="col-lg-4 col-sm-6" style="height:250px">
            <a class="portfolio-box" target="_blank" href="https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=f3c0f7d512273410VgnVCM2000000c205a0aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default">
              <img class="img-fluid bg-cover" src="img/data/pollution.jpg" alt="">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    Air Polution
                  </div>
                  <div class="project-name">
                    Madrid 
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-4 col-sm-6" style="height:250px">
            <a class="portfolio-box" target="_blank" href="https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=758352c974fb3410VgnVCM2000000c205a0aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default">
              <img class="img-fluid" src="img/data/classroom.jpg" alt="">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    Primary Schools
                  </div>
                  <div class="project-name">
                    Madrid
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-4 col-sm-6" style="height:250px">
            <a class="portfolio-box" target="_blank" href="https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=337541000be13410VgnVCM2000000c205a0aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default">
              <img class="img-fluid" src="img/data/playground.jpg" alt="">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    Childrens Playgrounds
                  </div>
                  <div class="project-name">
                    Madrid
                  </div>
                </div>
              </div>
            </a>
          </div>
        </div>
        <div class="row no-gutters">
          <div class="col-lg-4 col-sm-6" style="height:250px">
            <a class="portfolio-box" target="_blank" href="https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=86e9eca8a5a03410VgnVCM1000000b205a0aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default">
              <img class="img-fluid" src="img/data/elderly.jpg" alt="">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    Elderly Homes
                  </div>
                  <div class="project-name">
                    Madrid
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-4 col-sm-6" >
            <a class="portfolio-box" target="_blank" href="https://datos.madrid.es/portal/site/egob/menuitem.c05c1f754a33a9fbe4b2e4b284f1a5a0/?vgnextoid=4a5fbef4b2503410VgnVCM2000000c205a0aRCRD&vgnextchannel=374512b9ace9f310VgnVCM100000171f5a0aRCRD&vgnextfmt=default">
              <img class="img-fluid" src="img/data/sports.jpg" alt="">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    Sports Centers
                  </div>
                  <div class="project-name">
                    Madrid
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-4 col-sm-6" style="height:250px">
            <a class="portfolio-box" target="_blank" href="http://dbpedia.org/page/Madrid_Metro">
              <img class="img-fluid" src="img/data/tools.jpg" alt="">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    Additional Ontologies
                  </div>
                  <div class="project-name">
                    DBPedia
                  </div>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>


    <section class="bg-primary">
      <div class="container">
        <h2 class="text-center text-white">Try our map!</h2>
        <div id='map' style='width: 1000px; height: 500px;'></div>
      </div>
    </section>


    <section id="team">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading">Let us know what you think!</h2>
            <hr class="my-4">
            <p class="mb-5">Feedback, additions or just general questions? Feel free to reach out to us!</p>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3 col-sm-6 ml-auto text-center">
            <i class="fas fa-camera fa-3x mb-3 sr-contact-1"></i>
            <p>Boy Raaijmakers</p>
          </div>
          <div class="col-lg-3 col-sm-6 ml-auto text-center">
            <i class="fas fa-camera fa-3x mb-3 sr-contact-2"></i>
            <p>Gioele Bigini</p>
          </div>
          <div class="col-lg-3 col-sm-6 ml-auto text-center">
            <i class="fas fa-phone fa-3x mb-3 sr-contact-3"></i>
            <p>123-456-6789</p>
          </div>
          <div class="col-lg-3 col-sm-6 mr-auto text-center">
            <i class="fas fa-envelope fa-3x mb-3 sr-contact-4"></i>
            <p>
              <a href="#">info@safeair.es</a>
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/creative.min.js"></script>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiYmlnbWVpc3RlciIsImEiOiJjam9qMG82NXUwMDh5M3FvOXpscndzMnc0In0.h1EaT7zfQ179dTjcnzIKlw';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/bigmeister/cjokjgwjc0old2rqshpbrkz1q',
            center: [-3.7034, 40.4750], // starting position [lng, lat]
            zoom: 9.6 // starting zoom
        });
    </script>

    <script>

      function sparqlQuery(query, baseURL, format) {
        if(!format)
          format="application/json";
        var params={
          "query": query
        };
        
        var querypart="";
        for(var k in params) {
          querypart+=k+"="+encodeURIComponent(params[k])+"&";
        }
        var queryURL=baseURL + '?' + querypart;
        if (window.XMLHttpRequest) {
          xmlhttp=new XMLHttpRequest();
        }
        else {
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.open("GET",queryURL,false);
        xmlhttp.send();
        return xmlhttp.responseText;
      }

      var getSchools = `
        PREFIX safeair: <http://safeare.es/project/ontology/SafeAir#> 
        SELECT ?school ?name 
        WHERE { 
          ?school a safeair:School; 
                  safeair:locName ?name.
        }`;

      var getElderlyAreas = `
        PREFIX safeair: <http://safeare.es/project/ontology/SafeAir#> 
        SELECT ?earea  
        WHERE { 
          ?earea a safeair:ElderlyRegion.
        }`;  

      var getSportAreas = `
        PREFIX safeair: <http://safeare.es/project/ontology/SafeAir#> 
        SELECT ?spark ?name 
        WHERE { 
          ?spark a safeair:SportPark; 
                  safeair:locName ?name.
        }`; 


      var getSportMeasurements = `
        PREFIX safeair: <http://safeare.es/project/ontology/SafeAir#> 
        SELECT ?spark ?name ?meas
        WHERE { 
            ?spark a safeair:SportPark; 
                   safeair:locName ?name;
                   safeair:isClosestTo ?station.
            ?station safeair:hasMeasurement ?meas.
        } LIMIT 100
      `;


      var data=sparqlQuery(getSportMeasurements, "http://safeair.es:7200/repositories/safeair");
      console.log(data);

    </script>

  </body>

</html>
